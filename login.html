<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login — Callera Laser</title>

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicons/favicon-32.png?v=15">
  <link rel="shortcut icon" type="image/png" href="./assets/favicons/favicon-32.png?v=15">

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">

  <style>
    :root{
      --gold:#BC933A;
      --ff-sans:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      --ff-display:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      --ph:#cfc29a; --error:#ffd06b; --radius-l:26px;
    }
    .auth{ position:relative; min-height:calc(100vh - 72px); display:grid; place-items:center; padding:clamp(18px,3.2vw,28px); background:#fff; overflow:hidden; }
    .auth::before{ content:""; position:absolute; inset:0; background:url("./assets/images/fundo.png") center/cover no-repeat; opacity:.12; pointer-events:none; }
    .auth .auth-bg{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:.08; pointer-events:none; }

    .auth-stack{ position:relative; z-index:1; display:grid; justify-items:center; gap:.5rem; width:100%; }
    .auth-title{ margin:0; font:900 clamp(1.6rem,3vw,2.2rem)/1 var(--ff-display); color:var(--gold); text-align:center; }

    .auth-card{ width:min(680px,92vw); background:var(--gold); color:#fff; border-radius:var(--radius-l); box-shadow:0 10px 24px rgba(0,0,0,.18); padding:clamp(18px,3vw,26px); }

    .field{ display:block; margin-bottom:.65rem; }
    .field-head{ display:flex; align-items:baseline; justify-content:space-between; gap:.75rem; margin-bottom:.35rem; }
    .field label{ font:700 .875rem/1 var(--ff-display); color:#fff; }
    .field .msg{ display:none; font:600 .8rem/1 var(--ff-sans); color:var(--error); }
    .field.error .msg{ display:inline; }

    .control{ display:grid; grid-template-columns:1fr auto; align-items:center; gap:.5rem; background:rgba(255,255,255,.92); border-radius:8px; padding:.5rem .5rem; box-shadow:inset 0 0 0 1px rgba(255,255,255,.35); }
    .control.has-leading{ grid-template-columns:auto 1fr auto; padding:.5rem .5rem .5rem .65rem; }
    .leading-icon{ width:22px;height:22px; display:grid; place-items:center; }
    .leading-icon img{ width:20px;height:20px; display:block; }

    .control input{ border:0; outline:0; background:transparent; min-width:0; color:#333; font:500 1rem/1 var(--ff-sans); }
    .control input::placeholder{ color:var(--ph); font-style:italic; }

    .trailing{ width:28px;height:28px; display:grid; place-items:center }
    .trailing button{ width:28px;height:28px; padding:0; border:0; background:transparent; cursor:pointer; outline:none; }
    .trailing img{ width:22px;height:22px; display:block }

    .field.error .control{
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,.95),
        0 6px 14px rgba(224,65,65,.22);
      background:
        linear-gradient(0deg, rgba(224,65,65,.06), rgba(224,65,65,.06)),
        rgba(255,255,255,.92);
    }

    .help-row{ margin:.25rem 0 .4rem; font:500 .9rem/1.2 var(--ff-sans); display:flex; justify-content:flex-start; }
    .help-row a{ color:#fff; text-decoration:underline; }

    .auth-actions{ display:grid; place-items:center; gap:.45rem; margin-top:.4rem; }
    .btn-login{ width:173px; height:46px; border-radius:40px; background:#fff; color:#BC933A; border:0; cursor:pointer; font:700 1rem/1 var(--ff-display); box-shadow:0 3px 0 rgba(0,0,0,.15); transition:opacity .2s, transform .06s; }
    .btn-login:active{ transform:translateY(1px); }
    .auth-note{ margin:.1rem 0 0; text-align:center; font:500 .9rem/1.2 var(--ff-sans); color:#fff; }
    .auth-note a{ color:#fff; text-decoration:underline; }

    input[type="password"]{ appearance:none; -webkit-appearance:none; -moz-appearance:none; }
    input[type="password"]::-ms-reveal, input[type="password"]::-ms-clear{ display:none; }
    input[type="password"]::-webkit-credentials-auto-fill-button{ visibility:hidden; display:none; }
    input[type="password"]::-webkit-textfield-decoration-container{ display:none; }
    @media (max-width:767.98px){ .field{ margin-bottom:.6rem; } }
  </style>
</head>
<body>
  <!-- Parciais (barra + menu) -->
  <div id="app-header"></div>
  <div id="app-menu"></div>

  <main class="auth" role="main">
    <img class="auth-bg" src="./assets/images/fundo.png" alt="" aria-hidden="true">

    <div class="auth-stack">
      <h1 class="auth-title">ENTRAR</h1>

      <section class="auth-card" aria-label="Formulário de login">
        <form id="formLogin" novalidate>
          <div class="field" id="f-email">
            <div class="field-head">
              <label for="email">E-mail</label>
              <span class="msg" id="msg-email" aria-live="polite"></span>
            </div>
            <div class="control has-leading">
              <span class="leading-icon"><img src="assets/icons/email.svg" alt=""></span>
              <input id="email" name="email" type="email" inputmode="email" placeholder="seuemail@dominio.com" required>
              <span class="trailing" aria-hidden="true"></span>
            </div>
          </div>

          <div class="field" id="f-senha">
            <div class="field-head">
              <label for="senha">Senha</label>
              <span class="msg" id="msg-senha" aria-live="polite"></span>
            </div>
            <div class="control">
              <input id="senha" name="senha" type="password" placeholder="sua senha" minlength="6" required>
              <span class="trailing">
                <button type="button" class="eye-toggle" data-target="senha" aria-pressed="false" aria-label="Mostrar senha">
                  <img src="assets/icons/eye-closed.svg" alt="">
                </button>
              </span>
            </div>
          </div>

          <div class="help-row">
            <a href="esqueceu-senha.html">Esqueceu sua senha?</a>
          </div>

          <div class="auth-actions">
            <button class="btn-login" type="submit">Entrar</button>
            <p class="auth-note">Não tem conta? <a href="cadastro.html">Cadastre-se</a></p>
          </div>
        </form>
      </section>
    </div>
  </main>

  <!-- Marca a página ativa + carrega parciais -->
  <script>window.APP_ACTIVE = 'login';</script>
  <script src="js/layout.js"></script>

  <!-- Supabase e Login -->
  <script type="module" src="js/supabaseClient.js"></script>
  <script type="module" src="js/auth-login.js"></script>
</body>
</html>
